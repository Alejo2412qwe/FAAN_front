<div class="card p-3">

	<p-toolbar styleClass="mb-3 gap-2">
		<ng-template pTemplate="left">
			<button pButton pRipple label="New" icon="pi pi-plus" class="p-button-primary mr-2"
				(click)="openNewRazaAnimal()"></button>
		</ng-template>

		<ng-template pTemplate="right">
			<button pButton pRipple label="Export" icon="pi pi-upload" class="p-button-help"></button>
		</ng-template>
	</p-toolbar>

	<p-table #dt [value]="listRazaAnimal" [lazy]="true" (onLazyLoad)="loadRazaAnimalLazy($event)" dataKey="id"
		[tableStyle]="{ 'min-width': '75rem' }" [paginator]="true" [rows]="4" [totalRecords]="totalRecords"
		[rowHover]="true" currentPageReportTemplate="Mostrando {first} to {last} of {totalRecords} tipos animales"
		[showCurrentPageReport]="true" [loading]="loading"
		[globalFilterFields]="['idRazaAnimal', 'nombreRaza', 'tipoAnimal.nombreTipo']">

		<ng-template pTemplate="caption">

			<div class="grid p-fluid align-items-center">
				<div class="col-12 md:col-8">
					<div class="p-inputgroup">
						<h5 class="m-0"><strong>REGISTRO DE ANIMAL</strong></h5><br>
					</div>
				</div>

				<div class="col-12 md:col-4">
					<div class="p-inputgroup">
						<input type="text" [(ngModel)]="valueAtribute" pInputText placeholder="Search by name raza.." />
						<button type="button" pButton pRipple [class]="submitFindAtribute ? 'p-button-danger' : ''"
							[icon]="'pi' + (submitFindAtribute ? ' pi-times' : ' pi-search')" styleClass="p-button-warn"
							[disabled]="valueAtribute ? false: true"
							(click)="submitFindAtribute ? clearInputAndStatus() : findByAtributeName() "></button>
					</div>

				</div>

			</div>

		</ng-template>


		<ng-template pTemplate="header">
			<tr>
				<th pSortableColumn="idAnimal" style="min-width:15rem"><strong>ID</strong> <p-sortIcon
						field="idAnimal"></p-sortIcon></th>

				<th pSortableColumn="idAnimal" style="min-width:15rem"><strong>FOTO</strong> <p-sortIcon
						field="idAnimal"></p-sortIcon>
				</th>

				<th pSortableColumn="nombreAnimal" style="min-width:15rem"><strong>NOMBRE</strong> <p-sortIcon
						field="nombreAnimal"></p-sortIcon></th>

				<th pSortableColumn="placaAnimal" style="min-width:15rem"><strong>PLACA</strong> <p-sortIcon
						field="placaAnimal"></p-sortIcon></th>

				<th pSortableColumn="nombreRaza" style="min-width:15rem"><strong>NOMBRE</strong> <p-sortIcon
						field="nombreRaza"></p-sortIcon>
				</th>

				<th pSortableColumn="tipoAnimal.nombreTipo" style="min-width:15rem"><strong>NOMBRE TIPO</strong>
					<p-sortIcon field="tipoAnimal.nombreTipo"></p-sortIcon>
				</th>
				<th></th>
			</tr>
		</ng-template>
		<ng-template pTemplate="body" let-razaAnimal>
			<tr>

				<td>{{ razaAnimal.idRazaAnimal }}</td>
				<td><img [src]="'https://t1.ea.ltmcdn.com/es/posts/7/4/3/como_ayudar_a_un_gatito_a_defecar_20347_600.jpg'"
						width="100" height="60" class="shadow-6" /></td>

				<td>{{ razaAnimal.nombreRaza }}</td>
				<td>{{ razaAnimal.tipoAnimal.nombreTipo }}</td>

				<td>
					<button pButton pRipple icon="pi pi-pencil"
						class="p-button-rounded p-button-success p-button-outlined mr-2"
						(click)="editRazaAnimal(razaAnimal)"></button>

					<button pButton pRipple [icon]="razaAnimal.estadoRaza === 'A' ? 'pi pi-check' : 'pi pi-trash'"
						[ngClass]="'p-button-rounded ' + (razaAnimal.estadoRaza === 'A' ? 'p-button-secondary' : 'p-button-danger') + ' p-button-outlined mt-1'"
						(click)="eliminadoLogicoDeLosTiposAnimales(razaAnimal)">
					</button>

				</td>
			</tr>
		</ng-template>
		<ng-template pTemplate="summary">
			<div class="flex align-items-center justify-content-between">En total son {{ listRazaAnimal ?
				totalRecords : 0 }} Razas de animales.</div>
		</ng-template>
	</p-table>
</div>



<p-dialog [(visible)]="razaAnimalDialog" [style]="{ width: '1000px', padding: screenWidth < 700 ? '10px' : '' }"
	header="Razas animales" [modal]="true" styleClass="p-fluid">
	<ng-template pTemplate="content">


		<!-- <div class="field">
			<label for="nombreRaza"><strong>Tipo Raza</strong></label>



		</div> -->

		<p-panel header="Rescatista" [toggleable]="true">

		</p-panel>

		<p-panel header="Datos Animal" [toggleable]="true" styleClass="mt-4">

			<div class=" flex justify-content-center">

				<p-fileUpload mode="basic" chooseLabel="Choose" name="demo[]"
					url="https://www.primefaces.org/cdn/api/upload.php" accept="image/*" [maxFileSize]="1000000"
					(onChange)="onFileSelect($event)"></p-fileUpload>


			</div>


			<div class="grid p-fluid align-items-center">
				<div class="col-12 md:col-4">
					<label for="nombreRaza"><strong>Nombre Animal</strong></label>
					<span class="p-input-icon-right ">
						<i class="pi pi-info-circle" [style.color]="submitted && !animal.nombreAnimal ? 'red':''"></i>
						<div class="p-inputgroup">
							<input type="text" [(ngModel)]="animal.nombreAnimal"
								[class]="submitted && (!animal.nombreAnimal) ? 'ng-invalid ng-dirty':''"
								id="nombreAnimal" name="nombreAnimal" pInputText placeholder="Nombre.." required />
						</div>
					</span>
					<small class="p-error" *ngIf="submitted && !animal.nombreAnimal">Name is required.</small>

				</div>

				<div class="col-12 md:col-4">
					<label for="nombreRaza"><strong>Placa Animal</strong></label>
					<span class="p-input-icon-right ">
						<i class="pi pi-info-circle"
							[style.color]="submitted && !animal.placaAnimal|| errorUnique ? 'red':''"></i>
						<div class="p-inputgroup">
							<input type="text" [(ngModel)]="animal.placaAnimal"
								[class]="submitted && (!animal.placaAnimal || errorUnique) ? 'ng-invalid ng-dirty':''"
								id="placaAnimal" name="placaAnimal" pInputText placeholder="Placa.." required />
						</div>
					</span>
					<small class="p-error" *ngIf="submitted && !animal.placaAnimal">Placa is required.</small>

				</div>

				<div class="col-12 md:col-4">
					<label for="nombreRaza"><strong>Edad Animal</strong></label>

					<div class="p-inputgroup">
						<!-- <input type="number" [(ngModel)]="animal.edadAnimal"
								[class]="submitted && (!animal.edadAnimal) ? 'ng-invalid ng-dirty':''" id="edadAnimal"
								name="edadAnimal" pInputText placeholder="Edad.." required /> -->
						<p-inputNumber [(ngModel)]="animal.edadAnimal" [showButtons]="true" inputId="minmax-buttons"
							[min]="0" [max]="15" [class]="submitted && (!animal.edadAnimal) ? 'ng-invalid ng-dirty':''"
							id="edadAnimal" name="edadAnimal" placeholder="Edad..">
						</p-inputNumber>

					</div>

					<small class="p-error" *ngIf="submitted && !animal.edadAnimal">Edad is required.</small>

				</div>

			</div>
		</p-panel>



	</ng-template>

	<ng-template pTemplate="footer">
		<button pButton pRipple label="Cancel" icon="pi pi-times" class="p-button-text" (click)="hideDialog()"></button>
		<button pButton pRipple [label]=" animal.idAnimal ? 'Actualizar': 'Guardar'" icon="pi pi-save"
			class="p-button-text" (click)="saveAndUpdateRazaAnimal()"></button>
	</ng-template>
</p-dialog>