<p-card header="" class="m-2">
    <h1 class="title">Control del Animal {{isIdAnimal}} </h1>
    <div class="d-flex align-items-center">
        <span class="p-input-icon-left" style="flex: 70%;">
            <i class="pi pi-search"></i>
            <input placeholder="Buscar Mascota" type="text" id="isTextDigit" name="isTextDigit"
                [(ngModel)]="isTextDigit" pInputText style="width: 100%;" />
        </span>
        <button type="button" (click)="showModalAnimales()" class="btn btn-primarys m-2" style="flex: 30%;">Seleccionar
            Animal</button>
    </div>
</p-card>



<div class="paleta-container">
    <div class="paleta">
      <input type="checkbox" id="checkVacunas" (change)="showCard(1)" [(ngModel)]="showVacunas">
      <label for="checkVacunas" class="paleta-label">Vacunas</label>
  </div>
  

  <p-card header="" class="m-2" *ngIf="selectedSections.includes(1)">
    <h1 class="title">Vacunas</h1>
    <div class="d-flex align-items-center">
        <button type="button" (click)="showModalVacuna()" class="btn btn-primarys m-2" style="flex: 80%;">Añadir
            vacuna</button>
        <button type="button" (click)="showModalTipoVacuna()" class="btn btn-primarys m-2" style="flex: 10%;">Crear
            Vacuna</button>
    </div>
    <div class="card">
        <p-table [value]="vacunasAnimales" responsiveLayout="scroll">
            <ng-template pTemplate="header">
                <tr>
                    <th>Fecha Vacunacion</th>
                    <th>Nombre Vacuna</th>
                    <th>Observaciones</th>
                    <th>Estado</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-columns="columns" let-data>
                <tr>
                    <td>{{ data.fechaVacuna }}</td>
                    <td>{{ data.nombreVacuna }}</td>
                    <td>{{ data.observaciones }}</td>
                    <td>{{ data.estadoVacuna }}</td>
                </tr>
            </ng-template>
        </p-table>
    </div>
  </p-card>
  
  
  



<!-- MODAL VACUNA -->
<p-dialog header="Crear nueva vacuna" [(visible)]="visibleTipoVacuna" [modal]="true" [style]="{ width: '30vw' }"
    [draggable]="false" [resizable]="false">
    <form (ngSubmit)="saveTipoVacuna()" ngNativeValidate style="padding: 15px;">
        <div class="grid p-fluid m-2">
            <div class="col-12 md:col-12 mt-1">
                <div class="p-inputgroup">
                    <span class="p-float-label">
                        <input type="text" pInputText id="nombreVacuna" name="nombreVacuna"
                            [(ngModel)]="tipoVacuna.nombreVacuna" />
                        <label htmlFor="nombreVacuna" class="bx bx-plus-medical"> Nombre Vacuna <span
                                class="red-asterisk"></span></label>
                    </span>
                </div>
                
            </div>
        </div>
        <div class="p-card-body">
            <div class="text-center">
                <button type="submit" class="btn btn-primarys">Crear nueva vacuna</button>
            </div>
        </div>
    </form>

    
    <p-panel header="Tipo Vacuna" [toggleable]="true">
        <div class="text-center">
            <div *ngIf="!isEmpty(tipoVacuna); else notSubmittedContent">
                <div class="">
                    <div class="card persona-card">

                        <div class="card-body">
                            <h5 class="card-title text-center">Información de Vacuna</h5>
                            <div class="row mb-2">

                                <div class="col">
                                    <label><strong>Nombre Vacuna: </strong></label>
                                    <span> <input [(ngModel)]="tipoVacunaSeleccionada.nombreVacuna" name="nombreVacuna"
                                            class="form-control" required></span>
                                </div>
                            </div>
                            <div class="row mb-1">
                                <div class="col">
                                    <label><strong>Nombre Vacuna: </strong></label>
                                    <span> <input [(ngModel)]="tipoVacunaSeleccionada.estado" name="estado"
                                            class="form-control" required></span>
                                </div>>

                            </div>

                            <div class="text-center mt-2">

                                    <button pButton type="button" label="Editar" icon="pi pi-check"
                                        (click)="actualizarVacuna()"></button>

                                    
                            </div>
                        </div>
                    </div>
                </div>

            </div>

            <ng-template #notSubmittedContent>


        
                <p-table [value]="listTipoVacuna" selectionMode="single" responsiveLayout="scroll" [paginator]="true"
                    [rows]="3" [responsive]="true" [rowHover]="true" (onRowSelect)="onRowSelect($event.data)"
                    [showCurrentPageReport]="true" [loading]="loadingVacuna">
                    <ng-template pTemplate="header">
                        <tr>
                            <th>Nombres Vacuna </th>
                            <th>Estado Vacuna </th>

                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-rowData let-tipoVacuna>
                        <tr [pSelectableRow]="rowData">
                            <td>{{tipoVacuna.nombreVacuna}}</td>

                            <td>{{tipoVacuna.estado}}</td>
                        </tr>
                    </ng-template>
                </p-table>

            </ng-template>


        </div>


    </p-panel>
</p-dialog>

<p-dialog header="Crear nueva vacuna" [(visible)]="visibleVacuna" [modal]="true" [style]="{ width: '50vw'}"
    [draggable]="false" [resizable]="false">
    <form (ngSubmit)="saveVacuna()" ngNativeValidate style="padding: 15px;">
        <div class="grid p-fluid m-2">
            <div class="col-12 md:col-12 mt-1 justify-content-center">
                <p-dropdown appendTo="body" id="selectedVacuna" name="selectedVacuna" [options]="listTipoVacuna" [(ngModel)]="selectedVacuna" placeholder="Seleccione una vacuna"
                    optionLabel="nombreVacuna"></p-dropdown>
            </div>
        </div>

        <div class="grid p-fluid m-2">
            <div class="col-12 md:col-12 mt-1">
                <div class="p-inputgroup">
                    <p-calendar [inline]="true" [style]="{ 'position': 'relative', 'z-index': '1000' }" inputId="edad"
                        class="ng-dirty" [showIcon]="true" placeholder="Fecha Vacunacion" id="fechaVacuna"
                        name="fechaVacuna" [(ngModel)]="vacuna.fechaVacuna"></p-calendar>
                </div>
            </div>
        </div>
        <p-panel header="Proxima Vacuna" [toggleable]="true">
            <div class="grid p-fluid m-2">
                <div class="col-12 md:col-12 mt-1">
                    <div class="p-inputgroup">
                        <p-calendar [inline]="true" [style]="{ 'position': 'relative', 'z-index': '1000' }" inputId="edad"
                            class="ng-dirty" [showIcon]="true" placeholder="Fecha Proxima Vacuna" id="fechaProximaVacuna"
                            name="fechaProximaVacuna" [(ngModel)]="vacuna.fechaProximaVacuna"></p-calendar>
                    </div>
                </div>
            </div>
        </p-panel>



        <div class="grid p-fluid m-2">
            <div class="col-12 md:col-12 mt-1">
                <div class="p-inputgroup">
                    <span class="p-float-label">
                        <input type="text" pInputText id="observaciones" name="observaciones"
                            [(ngModel)]="vacuna.observaciones" />
                        <label htmlFor="observaciones" class="bx bx-plus-medical"> Observacion <span
                                class="red-asterisk"></span></label>
                    </span>
                </div>
            </div>
        </div>


        <div class="text-center">
            <button type="submit" class="btn btn-primarys">Agregar vacuna</button>
        </div>
    </form>
</p-dialog>

